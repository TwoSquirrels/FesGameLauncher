/*!
 * ProjectName: fesgamelauncher
 * FileName: launcher.scss
 * Encoding: UTF-8
 * Author: TwoSquirrels
 * CreationDate: Sep 11, 2021
 * --------------------------------------------------------------------------------
 * Copyright 2021 APC
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *     http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

$theme-color: #FFFFFF;
$box-color: khaki;
$games-color: lightgreen;
$movies-color: aquamarine;
$others-color: plum;
$shadow-radius: .5rem;
$shadow-color: rgba(64, 64, 64, 1.0);

@mixin focus($color: rgba(64, 64, 64, .25)) {
  &:focus {
    background-color: $color;
  }
  &.js-focus-visible,
  &:focus:not(.focus-visible) {
    background-color: transparent;
  }
  @media (hover: hover) {
    &:hover {
      background-color: $color;
    }
  }
  @media (hover: none) {
    &:active {
      background-color: $color;
    }
  }
}

body {

  display: flex;
  justify-content: center;
  align-items: center;

  width: var(--width);
  height: var(--height);

  background-color: $theme-color;

  main {

    display: flex;
    flex-direction: column;

    width: calc(var(--height) * 4 / 3);
    max-width: var(--width);
    height: var(--height);
    padding: 1rem;

    text-align: center;

    > h2 span {

      display: inline-block;
      white-space: nowrap;

    }

    > .box {

      position: relative;
      display: flex;
      flex-direction: column;

      flex: 1;
      margin: min(1rem, 2%);

      box-shadow: 0 0 $shadow-radius 0 $shadow-color;

      &::before {

        content: "";

        position: absolute;
        display: block;

        top: 2em;
        width: 100%;
        height: calc(100% - 2em);

        background-color: $box-color;

      }

      > .tabs {

        display: flex;
        flex-direction: row;

        flex: 0 0 2em;
        margin: 0;
        padding: 0;

        z-index: 32;
        list-style-type: none;

        > li {

          position: relative;
          display: block;

          flex: 1;
          min-width: 4em;

          &.games {
            background-color: $games-color;
          }
          &.movies {
            background-color: $movies-color;
          }
          &.others {
            background-color: $others-color;
          }
          &:not(.selected) {
            box-shadow: inset 0 -#{$shadow-radius} #{$shadow-radius} -#{$shadow-radius} #{$shadow-color};
          }
          &.selected {
            z-index: 40;
            &.games {
              box-shadow: #{$shadow-radius} 0 #{$shadow-radius} -#{$shadow-radius} #{$shadow-color};
            }
            &.movies {
              box-shadow: -#{$shadow-radius} 0 #{$shadow-radius} -#{$shadow-radius} #{$shadow-color},
                #{$shadow-radius} 0 #{$shadow-radius} -#{$shadow-radius} #{$shadow-color};
            }
            &.others {
              box-shadow: -#{$shadow-radius} 0 #{$shadow-radius} -#{$shadow-radius} #{$shadow-color};
            }
          }

          > button {

            width: 100%;
            height: 100%;
            padding: 0;

            outline: 0;
            border: 0;
            @include focus();

          }

        }

      }

      > .items {

        flex: 1;
        margin: 0;
        padding: min(1rem, 2%);

        z-index: 48;
        overflow: auto;
        list-style-type: none;
        &.games {
          background-color: $games-color;
        }
        &.movies {
          background-color: $movies-color;
        }
        &.others {
          background-color: $others-color;
        }

        > li {

          > button {

            display: grid;
            grid-template-rows: 50% 50%;
            grid-template-columns: 3em 1fr 6.5em;
            @media screen and (max-width: 32em) {
              grid-template-columns: 3em 1fr 3em;
            }
            grid-template-areas:
              "icon title  version"
              "icon author added  ";
            &.is-game {
              grid-template-columns: 3em 1fr 8em 6.5em;
              @media screen and (max-width: 32em) {
                grid-template-columns: 3em 1fr 2.5em 3em;
              }
              grid-template-areas:
                "icon title  difficulty version"
                "icon author difficulty added  ";
            }

            width: 100%;
            height: 3em;
            padding: 0;

            text-align: left;
            overflow: hidden;
            outline: 0;
            border: 0;
            &:not(.selected) {
              @include focus();
            }
            &.selected {
              background-color: rgba(0, 0, 0, .25);
            }

            > * {

              display: flex;
              align-items: center;

              overflow: hidden;

              > .ellipsis {

                width: 100%;
                height: 100%;

                overflow: hidden;
                white-space: nowrap;
                text-overflow: ellipsis;

              }

            }

            @media screen and (max-width: 32em) {
              .wide-only {
                display: none;
              }
            }

            > .icon {

              justify-content: center;

              grid-area: icon;
              width: 100%;
              height: 100%;
              padding: .25em;

              object-fit: contain;

            }

            > .title {

              grid-area: title;

            }

            > .author {

              grid-area: author;

              color: dimgray;

            }

            > .difficulty {

              grid-area: difficulty;
              height: 100%;

              > span {

                filter: drop-shadow(0 0 .125em white);
                &.easy {
                  color: dodgerblue;
                }
                &.normal {
                  color: darkorange;
                }
                &.hard {
                  color: orangered;
                }

              }

            }

            > .version {

              grid-area: version;

              color: dimgray;

            }

            > .added {

              grid-area: added;

              color: dimgray;

              > .new {

                color: red;
                font-weight: bolder;

              }

            }

          }

          > .error {

            display: grid;
            grid-template-rows: 50% 50%;
            grid-template-columns: 1fr;
            grid-template-areas:
              "notice"
              "id";

            width: 100%;
            height: 3em;

            text-align: left;
            overflow: hidden;
            background-color: lightcoral;

            > * {

              display: flex;
              align-items: center;

              padding: 0 .5em;

              overflow: hidden;

            }

            > .notice {

              grid-area: notice;

            }

            > .id {

              grid-area: id;

              color: dimgray;

            }

          }

        }

      }

      > .preview {

        position: relative;

        flex: 1;
        margin: 0;

        z-index: 16;
        box-shadow: inset 0 #{$shadow-radius} #{$shadow-radius} -#{$shadow-radius} #{$shadow-color};
        overflow: hidden;

        > .unselected {

          position: absolute;
          display: flex;
          justify-content: center;
          align-items: center;

          width: 100%;
          height: 100%;

          > p {

            font-size: 2em;

          }

        }

      }

      > .loading {

        position: absolute;
        display: flex;
        justify-content: center;
        align-items: center;

        width: 100%;
        height: 100%;

        z-index: 64;
        overflow: hidden;
        color: white;
        background-color: rgba(64, 64, 64, .75);

        > p {

          font-size: 2em;

        }

      }

    }

  }

}
